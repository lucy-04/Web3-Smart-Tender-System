# FATTS Contractor Onboarding Module
## Phase 1 — Contractor Data Model Design

---

## 1️⃣ MASTER CONTRACTOR JSON SCHEMA

### Complete Contractor Data Model

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://fatts.gov.in/schemas/contractor.json",
  "title": "FATTS Contractor Registration Schema",
  "description": "Production-grade contractor onboarding data model for Indian public procurement",
  "type": "object",
  "required": [
    "contractorId",
    "walletAddress",
    "legalIdentity",
    "financialQualification",
    "technicalExperience",
    "compliance",
    "documentReferences",
    "verificationStatus"
  ],
  "properties": {
    "contractorId": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier generated by system (UUID v4)"
    },
    "walletAddress": {
      "type": "string",
      "pattern": "^0x[a-fA-F0-9]{40}$",
      "description": "Ethereum wallet address (42 characters, starts with 0x)"
    },
    "registrationTimestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 UTC timestamp of registration initiation"
    },
    "lastUpdatedTimestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 UTC timestamp of last update"
    },
    "legalIdentity": {
      "$ref": "#/definitions/legalIdentity"
    },
    "financialQualification": {
      "$ref": "#/definitions/financialQualification"
    },
    "technicalExperience": {
      "$ref": "#/definitions/technicalExperience"
    },
    "compliance": {
      "$ref": "#/definitions/compliance"
    },
    "documentReferences": {
      "$ref": "#/definitions/documentReferences"
    },
    "verificationStatus": {
      "$ref": "#/definitions/verificationStatus"
    },
    "riskFlags": {
      "$ref": "#/definitions/riskFlags"
    },
    "aiScore": {
      "$ref": "#/definitions/aiScore"
    },
    "auditTrail": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/auditEntry"
      }
    }
  },
  "definitions": {
    "legalIdentity": {
      "type": "object",
      "required": [
        "entityType",
        "legalName",
        "pan",
        "gstin",
        "registrationDate",
        "registeredAddress"
      ],
      "properties": {
        "entityType": {
          "type": "string",
          "enum": [
            "PRIVATE_LIMITED",
            "PUBLIC_LIMITED",
            "LLP",
            "PARTNERSHIP",
            "PROPRIETORSHIP",
            "AOP",
            "TRUST",
            "GOVERNMENT"
          ],
          "description": "Type of legal entity as per Indian law"
        },
        "legalName": {
          "type": "string",
          "minLength": 3,
          "maxLength": 200,
          "description": "Registered legal name of the entity"
        },
        "tradeName": {
          "type": "string",
          "maxLength": 200,
          "description": "Trading name if different from legal name (optional)"
        },
        "pan": {
          "type": "string",
          "pattern": "^[A-Z]{3}[ABCFGLPTJ][A-Z][0-9]{4}[A-Z]$",
          "description": "Permanent Account Number (10 characters)"
        },
        "panVerificationStatus": {
          "type": "string",
          "enum": ["PENDING", "VERIFIED", "FAILED", "MISMATCH"],
          "default": "PENDING"
        },
        "gstin": {
          "type": "string",
          "pattern": "^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$",
          "description": "GST Identification Number (15 characters)"
        },
        "gstinVerificationStatus": {
          "type": "string",
          "enum": ["PENDING", "VERIFIED", "FAILED", "MISMATCH", "CANCELLED"],
          "default": "PENDING"
        },
        "cin": {
          "type": "string",
          "pattern": "^[A-Z]{1}[0-9]{5}[A-Z]{2}[0-9]{4}[A-Z]{3}[0-9]{6}$",
          "description": "Corporate Identity Number (21 characters) - for Companies"
        },
        "cinVerificationStatus": {
          "type": "string",
          "enum": ["PENDING", "VERIFIED", "FAILED", "NOT_APPLICABLE"],
          "default": "NOT_APPLICABLE"
        },
        "llpin": {
          "type": "string",
          "pattern": "^[A-Z]{3}-[0-9]{4}$",
          "description": "LLP Identification Number - for LLPs"
        },
        "llpinVerificationStatus": {
          "type": "string",
          "enum": ["PENDING", "VERIFIED", "FAILED", "NOT_APPLICABLE"],
          "default": "NOT_APPLICABLE"
        },
        "registrationDate": {
          "type": "string",
          "format": "date",
          "description": "Date of entity registration (ISO 8601 date)"
        },
        "incorporationYear": {
          "type": "integer",
          "minimum": 1950,
          "maximum": 2100,
          "description": "Year of incorporation"
        },
        "registeredAddress": {
          "$ref": "#/definitions/address"
        },
        "operationalAddress": {
          "$ref": "#/definitions/address"
        },
        "contactDetails": {
          "$ref": "#/definitions/contactDetails"
        },
        "authorizedSignatories": {
          "type": "array",
          "minItems": 1,
          "maxItems": 10,
          "items": {
            "$ref": "#/definitions/authorizedSignatory"
          }
        },
        "msmeRegistered": {
          "type": "boolean",
          "default": false
        },
        "msmeNumber": {
          "type": "string",
          "pattern": "^[A-Z]{2}[0-9]{12}$",
          "description": "MSME Registration Number (if applicable)"
        },
        "msmeCategory": {
          "type": "string",
          "enum": ["MICRO", "SMALL", "MEDIUM", "NOT_APPLICABLE"],
          "default": "NOT_APPLICABLE"
        }
      }
    },
    "address": {
      "type": "object",
      "required": ["line1", "city", "state", "pincode"],
      "properties": {
        "line1": {
          "type": "string",
          "maxLength": 200,
          "description": "Address line 1"
        },
        "line2": {
          "type": "string",
          "maxLength": 200,
          "description": "Address line 2 (optional)"
        },
        "city": {
          "type": "string",
          "maxLength": 100,
          "description": "City/Town name"
        },
        "district": {
          "type": "string",
          "maxLength": 100,
          "description": "District name"
        },
        "state": {
          "type": "string",
          "enum": [
            "ANDHRA_PRADESH", "ARUNACHAL_PRADESH", "ASSAM", "BIHAR",
            "CHHATTISGARH", "GOA", "GUJARAT", "HARYANA", "HIMACHAL_PRADESH",
            "JHARKHAND", "KARNATAKA", "KERALA", "MADHYA_PRADESH",
            "MAHARASHTRA", "MANIPUR", "MEGHALAYA", "MIZORAM", "NAGALAND",
            "ODISHA", "PUNJAB", "RAJASTHAN", "SIKKIM", "TAMIL_NADU",
            "TELANGANA", "TRIPURA", "UTTAR_PRADESH", "UTTARAKHAND",
            "WEST_BENGAL", "DELHI", "JAMMU_AND_KASHMIR", "LADAKH",
            "PUDUCHERRY", "CHANDIGARH", "ANDAMAN_AND_NICOBAR",
            "DADRA_AND_NAGAR_HAVELI_AND_DAMAN_AND_DIU", "LAKSHADWEEP"
          ]
        },
        "pincode": {
          "type": "string",
          "pattern": "^[1-9][0-9]{5}$",
          "description": "6-digit Indian PIN code"
        },
        "country": {
          "type": "string",
          "default": "INDIA"
        }
      }
    },
    "contactDetails": {
      "type": "object",
      "required": ["email", "phone"],
      "properties": {
        "email": {
          "type": "string",
          "format": "email",
          "description": "Official email address"
        },
        "phone": {
          "type": "string",
          "pattern": "^[+]?[0-9]{10,15}$",
          "description": "Official phone number with country code"
        },
        "fax": {
          "type": "string",
          "description": "Fax number (optional)"
        },
        "website": {
          "type": "string",
          "format": "uri",
          "description": "Company website URL (optional)"
        }
      }
    },
    "authorizedSignatory": {
      "type": "object",
      "required": ["name", "designation", "pan", "din"],
      "properties": {
        "name": {
          "type": "string",
          "maxLength": 200,
          "description": "Full name of authorized signatory"
        },
        "designation": {
          "type": "string",
          "maxLength": 100,
          "description": "Designation (Director, Partner, Proprietor, etc.)"
        },
        "pan": {
          "type": "string",
          "pattern": "^[A-Z]{3}[ABCFGLPTJ][A-Z][0-9]{4}[A-Z]$",
          "description": "PAN of signatory"
        },
        "din": {
          "type": "string",
          "pattern": "^[0-9]{8}$",
          "description": "Director Identification Number (8 digits) - for Directors"
        },
        "aadhaarLast4": {
          "type": "string",
          "pattern": "^[0-9]{4}$",
          "description": "Last 4 digits of Aadhaar (for verification)"
        },
        "mobile": {
          "type": "string",
          "pattern": "^[+]?[0-9]{10,15}$",
          "description": "Mobile number"
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "Email address"
        },
        "authorizationDate": {
          "type": "string",
          "format": "date",
          "description": "Date of authorization"
        }
      }
    },
    "financialQualification": {
      "type": "object",
      "required": ["annualTurnover", "turnoverHistory", "solvencyCertificate"],
      "properties": {
        "annualTurnover": {
          "$ref": "#/definitions/turnoverEntry"
        },
        "turnoverHistory": {
          "type": "array",
          "minItems": 3,
          "maxItems": 5,
          "items": {
            "$ref": "#/definitions/turnoverEntry"
          },
          "description": "Turnover for last 3-5 financial years"
        },
        "netWorth": {
          "type": "object",
          "properties": {
            "amount": {
              "$ref": "#/definitions/monetaryValue"
            },
            "asOnDate": {
              "type": "string",
              "format": "date"
            }
          }
        },
        "solvencyCertificate": {
          "$ref": "#/definitions/solvencyCertificate"
        },
        "bankDetails": {
          "type": "object",
          "description": "Bank details for transaction purposes (NOT stored on-chain)",
          "properties": {
            "bankName": {
              "type": "string",
              "maxLength": 100
            },
            "branchName": {
              "type": "string",
              "maxLength": 100
            },
            "accountType": {
              "type": "string",
              "enum": ["CURRENT", "SAVINGS", "CASH_CREDIT", "OVERDRAFT"]
            },
            "ifscCode": {
              "type": "string",
              "pattern": "^[A-Z]{4}0[A-Z0-9]{6}$"
            },
            "accountLast4Digits": {
              "type": "string",
              "pattern": "^[0-9]{4}$",
              "description": "Only last 4 digits stored for verification"
            }
          },
          "required": ["bankName", "branchName", "accountType", "ifscCode", "accountLast4Digits"]
        },
        "caCertificateDetails": {
          "type": "object",
          "properties": {
            "caName": {
              "type": "string",
              "maxLength": 200
            },
            "caMembershipNumber": {
              "type": "string",
              "pattern": "^[0-9]{5,6}$"
            },
            "caFirmName": {
              "type": "string",
              "maxLength": 200
            },
            "caFirmRegistrationNumber": {
              "type": "string"
            },
            "udin": {
              "type": "string",
              "pattern": "^[0-9]{6}[A-Z]{6}[0-9]{6}$",
              "description": "Unique Document Identification Number (18 chars)"
            },
            "certificateDate": {
              "type": "string",
              "format": "date"
            }
          }
        }
      }
    },
    "turnoverEntry": {
      "type": "object",
      "required": ["financialYear", "amount", "currency"],
      "properties": {
        "financialYear": {
          "type": "string",
          "pattern": "^[0-9]{4}-[0-9]{2}$",
          "description": "Financial year in format YYYY-YY (e.g., 2023-24)"
        },
        "amount": {
          "type": "integer",
          "minimum": 0,
          "description": "Turnover amount in smallest currency unit (paise for INR)"
        },
        "amountFormatted": {
          "type": "string",
          "description": "Human-readable amount (e.g., '₹5,00,00,000')"
        },
        "currency": {
          "type": "string",
          "default": "INR"
        },
        "source": {
          "type": "string",
          "enum": ["AUDITED", "CERTIFIED_BY_CA", "SELF_DECLARED"],
          "description": "Source of turnover data"
        }
      }
    },
    "monetaryValue": {
      "type": "object",
      "properties": {
        "amount": {
          "type": "integer",
          "minimum": 0,
          "description": "Amount in smallest currency unit (paise for INR)"
        },
        "amountFormatted": {
          "type": "string"
        },
        "currency": {
          "type": "string",
          "default": "INR"
        }
      }
    },
    "solvencyCertificate": {
      "type": "object",
      "required": ["bankName", "solvencyAmount", "issueDate", "validUntil"],
      "properties": {
        "bankName": {
          "type": "string",
          "maxLength": 100
        },
        "branchName": {
          "type": "string",
          "maxLength": 100
        },
        "solvencyAmount": {
          "$ref": "#/definitions/monetaryValue"
        },
        "issueDate": {
          "type": "string",
          "format": "date"
        },
        "validUntil": {
          "type": "string",
          "format": "date"
        },
        "certificateNumber": {
          "type": "string",
          "maxLength": 50
        }
      }
    },
    "technicalExperience": {
      "type": "object",
      "required": ["pastProjects", "totalExperienceYears", "coreCompetencies"],
      "properties": {
        "totalExperienceYears": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Total years of experience in the business"
        },
        "coreCompetencies": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "string",
            "enum": [
              "ROAD_CONSTRUCTION",
              "BRIDGE_CONSTRUCTION",
              "BUILDING_CONSTRUCTION",
              "IRRIGATION",
              "WATER_SUPPLY",
              "SEWERAGE",
              "ELECTRICAL_WORKS",
              "MECHANICAL_WORKS",
              "HVAC",
              "FIRE_FIGHTING",
              "LANDSCAPING",
              "INTERIOR_WORKS",
              "IT_INFRASTRUCTURE",
              "CONSULTANCY",
              "SUPPLY_CHAIN",
              "OTHER"
            ]
          }
        },
        "pastProjects": {
          "type": "array",
          "minItems": 1,
          "maxItems": 50,
          "items": {
            "$ref": "#/definitions/pastProject"
          }
        },
        "ongoingProjects": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/pastProject"
          }
        },
        "keyPersonnel": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/keyPerson"
          }
        },
        "equipmentOwned": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "equipmentType": {
                "type": "string"
              },
              "quantity": {
                "type": "integer"
              },
              "ownershipStatus": {
                "type": "string",
                "enum": ["OWNED", "LEASED", "RENTED"]
              }
            }
          }
        }
      }
    },
    "pastProject": {
      "type": "object",
      "required": ["projectName", "clientName", "projectValue", "startDate", "completionDate", "completionStatus"],
      "properties": {
        "projectId": {
          "type": "string",
          "format": "uuid",
          "description": "Unique ID for this project entry"
        },
        "projectName": {
          "type": "string",
          "maxLength": 500
        },
        "projectDescription": {
          "type": "string",
          "maxLength": 2000
        },
        "clientName": {
          "type": "string",
          "maxLength": 200
        },
        "clientType": {
          "type": "string",
          "enum": ["CENTRAL_GOVERNMENT", "STATE_GOVERNMENT", "PSU", "PRIVATE", "INTERNATIONAL"]
        },
        "clientDepartment": {
          "type": "string",
          "maxLength": 200
        },
        "projectValue": {
          "$ref": "#/definitions/monetaryValue"
        },
        "startDate": {
          "type": "string",
          "format": "date"
        },
        "originalCompletionDate": {
          "type": "string",
          "format": "date"
        },
        "actualCompletionDate": {
          "type": "string",
          "format": "date"
        },
        "completionStatus": {
          "type": "string",
          "enum": ["COMPLETED", "ONGOING", "TERMINATED", "ABANDONED"]
        },
        "completionPercentage": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100
        },
        "delayDays": {
          "type": "integer",
          "minimum": 0,
          "description": "Days delayed beyond original completion date"
        },
        "delayReason": {
          "type": "string",
          "maxLength": 500
        },
        "projectLocation": {
          "$ref": "#/definitions/address"
        },
        "projectCategory": {
          "type": "string"
        },
        "contractNumber": {
          "type": "string",
          "maxLength": 100
        },
        "workOrderNumber": {
          "type": "string",
          "maxLength": 100
        },
        "satisfactoryCertificate": {
          "type": "boolean",
          "default": false
        },
        "performanceRating": {
          "type": "string",
          "enum": ["EXCELLENT", "GOOD", "SATISFACTORY", "POOR", "NOT_RATED"]
        },
        "remarks": {
          "type": "string",
          "maxLength": 1000
        }
      }
    },
    "keyPerson": {
      "type": "object",
      "required": ["name", "designation", "qualification", "experienceYears"],
      "properties": {
        "name": {
          "type": "string",
          "maxLength": 200
        },
        "designation": {
          "type": "string",
          "maxLength": 100
        },
        "qualification": {
          "type": "string",
          "maxLength": 200
        },
        "specialization": {
          "type": "string",
          "maxLength": 200
        },
        "experienceYears": {
          "type": "integer",
          "minimum": 0
        },
        "professionalMembership": {
          "type": "string",
          "maxLength": 200
        },
        "membershipNumber": {
          "type": "string",
          "maxLength": 50
        }
      }
    },
    "compliance": {
      "type": "object",
      "required": ["litigationDisclosure", "esicRegistration", "walletDeclaration"],
      "properties": {
        "litigationDisclosure": {
          "$ref": "#/definitions/litigationDisclosure"
        },
        "esicRegistration": {
          "$ref": "#/definitions/esicRegistration"
        },
        "labourLicense": {
          "$ref": "#/definitions/labourLicense"
        },
        "walletDeclaration": {
          "$ref": "#/definitions/walletDeclaration"
        },
        "blacklistStatus": {
          "type": "object",
          "properties": {
            "isBlacklisted": {
              "type": "boolean",
              "default": false
            },
            "blacklistDetails": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "department": { "type": "string" },
                  "reason": { "type": "string" },
                  "date": { "type": "string", "format": "date" },
                  "validUntil": { "type": "string", "format": "date" }
                }
              }
            }
          }
        },
        "taxCompliance": {
          "type": "object",
          "properties": {
            "incomeTaxReturnsFiled": {
              "type": "boolean"
            },
            "gstReturnsFiled": {
              "type": "boolean"
            },
            "lastITRYear": {
              "type": "string"
            },
            "lastGSTReturnPeriod": {
              "type": "string"
            }
          }
        },
        "environmentalClearance": {
          "type": "object",
          "properties": {
            "required": { "type": "boolean" },
            "obtained": { "type": "boolean" },
            "certificateNumber": { "type": "string" },
            "validUntil": { "type": "string", "format": "date" }
          }
        }
      }
    },
    "litigationDisclosure": {
      "type": "object",
      "required": ["hasPendingLitigation", "hasCriminalCases", "hasArbitrationCases"],
      "properties": {
        "hasPendingLitigation": {
          "type": "boolean",
          "default": false
        },
        "litigationCases": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["caseNumber", "court", "caseType", "claimAmount", "status"],
            "properties": {
              "caseNumber": {
                "type": "string",
                "maxLength": 100
              },
              "court": {
                "type": "string",
                "maxLength": 200
              },
              "caseType": {
                "type": "string",
                "enum": ["CIVIL", "CRIMINAL", "ARBITRATION", "TAX", "LABOUR", "OTHER"]
              },
              "claimAmount": {
                "$ref": "#/definitions/monetaryValue"
              },
              "status": {
                "type": "string",
                "enum": ["PENDING", "DISPOSED", "SETTLED", "APPEAL_PENDING"]
              },
              "filingDate": {
                "type": "string",
                "format": "date"
              },
              "description": {
                "type": "string",
                "maxLength": 1000
              },
              "againstContractor": {
                "type": "boolean",
                "description": "True if case is against the contractor"
              }
            }
          }
        },
        "hasCriminalCases": {
          "type": "boolean",
          "default": false
        },
        "criminalCases": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "firNumber": { "type": "string" },
              "policeStation": { "type": "string" },
              "sections": { "type": "string" },
              "status": { "type": "string" }
            }
          }
        },
        "hasArbitrationCases": {
          "type": "boolean",
          "default": false
        },
        "arbitrationCases": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "caseReference": { "type": "string" },
              "arbitrator": { "type": "string" },
              "claimAmount": { "$ref": "#/definitions/monetaryValue" },
              "status": { "type": "string" }
            }
          }
        },
        "totalExposureAmount": {
          "$ref": "#/definitions/monetaryValue",
          "description": "Total financial exposure from all litigation"
        }
      }
    },
    "esicRegistration": {
      "type": "object",
      "required": ["isRegistered"],
      "properties": {
        "isRegistered": {
          "type": "boolean",
          "default": false
        },
        "registrationNumber": {
          "type": "string",
          "pattern": "^[0-9]{17}$",
          "description": "ESIC Registration Number (17 digits)"
        },
        "registrationDate": {
          "type": "string",
          "format": "date"
        },
        "applicable": {
          "type": "boolean",
          "default": true,
          "description": "Whether ESIC is applicable to this contractor"
        },
        "employeeCount": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of employees covered under ESIC"
        }
      }
    },
    "labourLicense": {
      "type": "object",
      "required": ["isRequired"],
      "properties": {
        "isRequired": {
          "type": "boolean",
          "description": "Whether labour license is required based on workforce size"
        },
        "isObtained": {
          "type": "boolean",
          "default": false
        },
        "licenseNumber": {
          "type": "string",
          "maxLength": 50
        },
        "issuingAuthority": {
          "type": "string",
          "maxLength": 200
        },
        "validFrom": {
          "type": "string",
          "format": "date"
        },
        "validUntil": {
          "type": "string",
          "format": "date"
        },
        "workforceSize": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of contract labourers"
        }
      }
    },
    "walletDeclaration": {
      "type": "object",
      "required": ["declaredAddress", "signature", "declarationTimestamp"],
      "properties": {
        "declaredAddress": {
          "type": "string",
          "pattern": "^0x[a-fA-F0-9]{40}$",
          "description": "Wallet address declared by contractor"
        },
        "signature": {
          "type": "string",
          "description": "Cryptographic signature proving wallet ownership"
        },
        "declarationMessage": {
          "type": "string",
          "description": "The exact message that was signed"
        },
        "declarationTimestamp": {
          "type": "string",
          "format": "date-time"
        },
        "signatureVerified": {
          "type": "boolean",
          "default": false
        },
        "chainId": {
          "type": "integer",
          "description": "Blockchain network ID (11155111 for Sepolia, 1 for Mainnet)"
        }
      }
    },
    "documentReferences": {
      "type": "object",
      "required": ["documents"],
      "properties": {
        "documents": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/documentReference"
          }
        },
        "rootCID": {
          "type": "string",
          "description": "IPFS root CID containing all documents"
        },
        "documentHash": {
          "type": "string",
          "description": "Merkle root hash of all document hashes for integrity verification"
        }
      }
    },
    "documentReference": {
      "type": "object",
      "required": ["documentType", "ipfsCID", "uploadTimestamp"],
      "properties": {
        "documentId": {
          "type": "string",
          "format": "uuid"
        },
        "documentType": {
          "type": "string",
          "enum": [
            "PAN_CARD",
            "GST_CERTIFICATE",
            "CIN_CERTIFICATE",
            "LLPIN_CERTIFICATE",
            "CA_TURNOVER_CERTIFICATE",
            "BANK_SOLVENCY_CERTIFICATE",
            "PAST_PROJECTS_DOCUMENT",
            "LITIGATION_DISCLOSURE",
            "ESIC_CERTIFICATE",
            "LABOUR_LICENSE",
            "MSME_CERTIFICATE",
            "AUTHORIZATION_LETTER",
            "OTHER"
          ]
        },
        "documentName": {
          "type": "string",
          "maxLength": 200
        },
        "ipfsCID": {
          "type": "string",
          "pattern": "^Qm[a-zA-Z0-9]{44}$|^baf[a-zA-Z0-9]{56,}$",
          "description": "IPFS Content Identifier (CID v0 or v1)"
        },
        "uploadTimestamp": {
          "type": "string",
          "format": "date-time"
        },
        "fileSize": {
          "type": "integer",
          "description": "File size in bytes"
        },
        "fileHash": {
          "type": "string",
          "description": "SHA-256 hash of the file for integrity verification"
        },
        "mimeType": {
          "type": "string",
          "enum": ["application/pdf", "image/jpeg", "image/png"]
        },
        "verified": {
          "type": "boolean",
          "default": false
        },
        "verificationTimestamp": {
          "type": "string",
          "format": "date-time"
        },
        "verifiedBy": {
          "type": "string",
          "description": "ID of verifier (government official or system)"
        },
        "extractedFields": {
          "type": "object",
          "description": "Key-value pairs extracted from document by AI/OCR",
          "additionalProperties": {
            "type": "string"
          }
        },
        "extractionConfidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Confidence score of AI extraction (0-1)"
        },
        "rejectionReason": {
          "type": "string",
          "description": "Reason if document was rejected"
        }
      }
    },
    "verificationStatus": {
      "type": "object",
      "required": ["currentStatus"],
      "properties": {
        "currentStatus": {
          "type": "string",
          "enum": [
            "DRAFT",
            "SUBMITTED",
            "UNDER_REVIEW",
            "AI_SCORED",
            "GOV_APPROVED",
            "REJECTED",
            "FLAGGED_FOR_RISK",
            "SUSPENDED",
            "EXPIRED"
          ],
          "default": "DRAFT"
        },
        "statusHistory": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "status": { "type": "string" },
              "timestamp": { "type": "string", "format": "date-time" },
              "changedBy": { "type": "string" },
              "remarks": { "type": "string" }
            }
          }
        },
        "submissionTimestamp": {
          "type": "string",
          "format": "date-time"
        },
        "reviewStartTimestamp": {
          "type": "string",
          "format": "date-time"
        },
        "approvalTimestamp": {
          "type": "string",
          "format": "date-time"
        },
        "rejectionTimestamp": {
          "type": "string",
          "format": "date-time"
        },
        "rejectionReason": {
          "type": "string"
        },
        "expiryTimestamp": {
          "type": "string",
          "format": "date-time",
          "description": "When this registration expires and needs renewal"
        },
        "reviewedBy": {
          "type": "string",
          "description": "ID of government official who reviewed"
        },
        "approvedBy": {
          "type": "string",
          "description": "ID of government official who approved"
        }
      }
    },
    "riskFlags": {
      "type": "object",
      "properties": {
        "overallRiskLevel": {
          "type": "string",
          "enum": ["LOW", "MEDIUM", "HIGH", "CRITICAL"],
          "default": "LOW"
        },
        "flags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/riskFlag"
          }
        },
        "lastAssessmentTimestamp": {
          "type": "string",
          "format": "date-time"
        },
        "assessmentVersion": {
          "type": "string",
          "description": "Version of risk assessment algorithm used"
        }
      }
    },
    "riskFlag": {
      "type": "object",
      "properties": {
        "flagId": {
          "type": "string",
          "format": "uuid"
        },
        "flagType": {
          "type": "string",
          "enum": [
            "HIGH_LITIGATION_RISK",
            "FINANCIAL_INSTABILITY",
            "GST_MISMATCH",
            "INVALID_PAN",
            "DOCUMENT_INCONSISTENCY",
            "TURNOVER_DECLINE",
            "BLACKLIST_HISTORY",
            "CRIMINAL_CASE",
            "TAX_DEFAULT",
            "LABOUR_VIOLATION",
            "ENVIRONMENTAL_VIOLATION",
            "CONTRACT_TERMINATION",
            "DELAY_HISTORY",
            "PERFORMANCE_ISSUE",
            "IDENTITY_MISMATCH",
            "WALLET_MISMATCH",
            "SUSPICIOUS_PATTERN"
          ]
        },
        "severity": {
          "type": "string",
          "enum": ["INFO", "WARNING", "ERROR", "CRITICAL"]
        },
        "description": {
          "type": "string"
        },
        "detectedTimestamp": {
          "type": "string",
          "format": "date-time"
        },
        "source": {
          "type": "string",
          "enum": ["AI_DETECTION", "GOVERNMENT_API", "MANUAL_REVIEW", "DOCUMENT_ANALYSIS"]
        },
        "relatedField": {
          "type": "string",
          "description": "JSON path to the field that triggered this flag"
        },
        "evidence": {
          "type": "object",
          "description": "Supporting evidence for the flag"
        },
        "resolved": {
          "type": "boolean",
          "default": false
        },
        "resolutionTimestamp": {
          "type": "string",
          "format": "date-time"
        },
        "resolutionRemarks": {
          "type": "string"
        }
      }
    },
    "aiScore": {
      "type": "object",
      "properties": {
        "competenceScore": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Overall competence score (0-100)"
        },
        "scoreBreakdown": {
          "type": "object",
          "properties": {
            "financialStrength": {
              "type": "object",
              "properties": {
                "score": { "type": "integer", "minimum": 0, "maximum": 100 },
                "weight": { "type": "number" },
                "factors": { "type": "object" }
              }
            },
            "technicalCapacity": {
              "type": "object",
              "properties": {
                "score": { "type": "integer", "minimum": 0, "maximum": 100 },
                "weight": { "type": "number" },
                "factors": { "type": "object" }
              }
            },
            "experienceScore": {
              "type": "object",
              "properties": {
                "score": { "type": "integer", "minimum": 0, "maximum": 100 },
                "weight": { "type": "number" },
                "factors": { "type": "object" }
              }
            },
            "complianceScore": {
              "type": "object",
              "properties": {
                "score": { "type": "integer", "minimum": 0, "maximum": 100 },
                "weight": { "type": "number" },
                "factors": { "type": "object" }
              }
            },
            "riskScore": {
              "type": "object",
              "properties": {
                "score": { "type": "integer", "minimum": 0, "maximum": 100 },
                "weight": { "type": "number" },
                "factors": { "type": "object" }
              }
            }
          }
        },
        "confidenceLevel": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "AI confidence in the score (0-1)"
        },
        "assessmentTimestamp": {
          "type": "string",
          "format": "date-time"
        },
        "modelVersion": {
          "type": "string",
          "description": "Version of AI model used"
        },
        "assessmentId": {
          "type": "string",
          "format": "uuid",
          "description": "Unique ID for this assessment"
        }
      }
    },
    "auditEntry": {
      "type": "object",
      "properties": {
        "timestamp": {
          "type": "string",
          "format": "date-time"
        },
        "action": {
          "type": "string"
        },
        "actor": {
          "type": "string"
        },
        "actorRole": {
          "type": "string",
          "enum": ["CONTRACTOR", "GOVERNMENT_ADMIN", "AI_SYSTEM", "AUDITOR", "SYSTEM"]
        },
        "details": {
          "type": "object"
        },
        "ipAddress": {
          "type": "string"
        },
        "previousValue": {
          "type": "object"
        },
        "newValue": {
          "type": "object"
        }
      }
    }
  }
}
```

---

## 2️⃣ FIELD VALIDATION RULES (INDIA-SPECIFIC)

### PAN (Permanent Account Number)

```
Format: AAAAA0000A (10 characters)
Pattern: ^[A-Z]{3}[ABCFGLPTJ][A-Z][0-9]{4}[A-Z]$

Structure:
┌─────────────────────────────────────────────────────────────┐
│ Position │ Description                                       │
├─────────────────────────────────────────────────────────────┤
│ 1-3      │ Alphabetic series (AAA-ZZZ)                      │
│ 4        │ Entity type indicator:                           │
│          │   A = AOP (Association of Persons)               │
│          │   B = BOI (Body of Individuals)                  │
│          │   C = Company                                    │
│          │   F = Firm/LLP                                   │
│          │   G = Government Agency                          │
│          │   H = HUF (Hindu Undivided Family)               │
│          │   L = Local Authority                            │
│          │   J = Artificial Juridical Person                │
│          │   P = Individual                                 │
│          │   T = Trust                                      │
│ 5        │ First letter of surname (individual) or entity   │
│ 6-9      │ Sequential number (0000-9999)                    │
│ 10       │ Check digit (alphabetic)                         │
└─────────────────────────────────────────────────────────────┘

Example: AAPFU0939K
Validation:
1. Length must be exactly 10 characters
2. All characters must be uppercase
3. Must match regex pattern
4. Entity type (position 4) must match declared entity type
```

### GSTIN (GST Identification Number)

```
Format: 00AAAAA0000A0A0 (15 characters)
Pattern: ^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$

Structure:
┌─────────────────────────────────────────────────────────────┐
│ Position │ Description                                       │
├─────────────────────────────────────────────────────────────┤
│ 1-2      │ State code (as per Indian Census)                │
│          │   01 = Jammu & Kashmir                           │
│          │   02 = Himachal Pradesh                          │
│          │   03 = Punjab                                    │
│          │   04 = Chandigarh                                │
│          │   05 = Uttarakhand                               │
│          │   06 = Haryana                                   │
│          │   07 = Delhi                                     │
│          │   08 = Rajasthan                                 │
│          │   09 = Uttar Pradesh                             │
│          │   10 = Bihar                                     │
│          │   11 = Sikkim                                    │
│          │   12 = Arunachal Pradesh                         │
│          │   13 = Nagaland                                  │
│          │   14 = Manipur                                   │
│          │   15 = Mizoram                                   │
│          │   16 = Tripura                                   │
│          │   17 = Meghalaya                                 │
│          │   18 = Assam                                     │
│          │   19 = West Bengal                               │
│          │   20 = Jharkhand                                 │
│          │   21 = Odisha                                    │
│          │   22 = Chhattisgarh                              │
│          │   23 = Madhya Pradesh                            │
│          │   24 = Gujarat                                   │
│          │   25 = Daman & Diu                               │
│          │   26 = Dadra & Nagar Haveli                      │
│          │   27 = Maharashtra                               │
│          │   28 = Andhra Pradesh (Old)                      │
│          │   29 = Karnataka                                 │
│          │   30 = Goa                                       │
│          │   31 = Lakshadweep                               │
│          │   32 = Kerala                                    │
│          │   33 = Tamil Nadu                                │
│          │   34 = Puducherry                                │
│          │   35 = Andaman & Nicobar                         │
│          │   36 = Telangana                                 │
│          │   37 = Andhra Pradesh (New)                      │
│ 3-7      │ PAN of the entity                                │
│ 8-11     │ Entity registration number within state          │
│ 12       │ Entity type (same as PAN position 4)             │
│ 13       │ Registration status:                             │
│          │   1-9 = Regular registration                     │
│          │   A-Z = Special registration types               │
│ 14       │ Always 'Z' (reserved)                            │
│ 15       │ Check digit (0-9 or A-Z)                         │
└─────────────────────────────────────────────────────────────┘

Example: 27AAPFU0939K1ZM
Validation:
1. Length must be exactly 15 characters
2. Positions 3-7 must match the declared PAN
3. Position 12 must match PAN position 4 (entity type)
4. Position 14 must be 'Z'
5. Check digit validation using Luhn algorithm

Check Digit Calculation:
- Convert alphabetic characters to numbers (A=10, B=11, ..., Z=35)
- Apply Luhn algorithm on all 14 digits (excluding check digit)
- Resulting check digit must match position 15
```

### CIN (Corporate Identity Number)

```
Format: U00000MH0000PLC000000 (21 characters)
Pattern: ^[A-Z]{1}[0-9]{5}[A-Z]{2}[0-9]{4}[A-Z]{3}[0-9]{6}$

Structure:
┌─────────────────────────────────────────────────────────────┐
│ Position │ Description                                       │
├─────────────────────────────────────────────────────────────┤
│ 1        │ Listing status:                                  │
│          │   U = Unlisted                                   │
│          │   L = Listed                                     │
│ 2-6      │ Industry code (5 digits)                         │
│ 7-8      │ State code (2 alphabets)                         │
│ 9-12     │ Year of incorporation (4 digits)                 │
│ 13-15    │ Ownership code:                                  │
│          │   PLC = Public Limited Company                   │
│          │   PTC = Private Limited Company                  │
│          │   ULC = Unlimited Liability Company              │
│          │   NPL = Not-for-Profit Company                   │
│          │   GSC = Government Company                       │
│ 16-21    │ Registration number (6 digits)                   │
└─────────────────────────────────────────────────────────────┘

Example: U12345MH2015PTC123456
Validation:
1. Length must be exactly 21 characters
2. Position 1 must be 'U' or 'L'
3. Year (positions 9-12) must be valid (1950-current year)
4. Ownership code must be valid
5. Verify with MCA (Ministry of Corporate Affairs) API
```

### LLPIN (Limited Liability Partnership ID)

```
Format: AAA-0000 (variable, typically 3 letters + hyphen + 4 digits)
Pattern: ^[A-Z]{3}-[0-9]{4}$

Example: AAB-1234
Validation:
1. Must match pattern
2. Verify with MCA API for LLPs
```

### Ethereum Wallet Address

```
Format: 0x followed by 40 hexadecimal characters
Pattern: ^0x[a-fA-F0-9]{40}$

Example: 0x1234567890abcdef1234567890abcdef12345678

Validation:
1. Must start with '0x'
2. Total length must be 42 characters
3. All characters after '0x' must be hexadecimal (0-9, a-f, A-F)
4. Checksum validation (mixed-case addresses):
   - Convert address to lowercase
   - Keccak256 hash of lowercase address
   - If hash nibble >= 8, corresponding address char should be uppercase
   - This prevents typos in mixed-case addresses

Wagmi Validation:
import { isAddress } from 'viem'
const isValid = isAddress(walletAddress) // returns boolean
```

### IFSC Code (Indian Financial System Code)

```
Format: AAAA0000000 (11 characters)
Pattern: ^[A-Z]{4}0[A-Z0-9]{6}$

Structure:
┌─────────────────────────────────────────────────────────────┐
│ Position │ Description                                       │
├─────────────────────────────────────────────────────────────┤
│ 1-4      │ Bank code (alphabetic)                           │
│ 5        │ Always '0' (reserved)                            │
│ 6-11     │ Branch code (alphanumeric)                       │
└─────────────────────────────────────────────────────────────┘

Example: SBIN0001234
Validation:
1. Length must be exactly 11 characters
2. Position 5 must be '0'
3. Verify with RBI API or bank database
```

### PIN Code (Postal Index Number)

```
Format: 000000 (6 digits)
Pattern: ^[1-9][0-9]{5}$

Validation:
1. First digit cannot be 0
2. Must be exactly 6 digits
3. Verify against India Post database
```

### MSME Registration Number

```
Format: AA000000000000 (2 letters + 12 digits)
Pattern: ^[A-Z]{2}[0-9]{12}$

Example: MH123456789012
Validation:
1. First 2 letters represent state/UT
2. Verify with Udyam registration portal
```

### ESIC Registration Number

```
Format: 17 digits
Pattern: ^[0-9]{17}$

Example: 12345678901234567
Validation:
1. Must be exactly 17 digits
2. Verify with ESIC portal
```

### UDIN (Unique Document Identification Number) - CA Certificates

```
Format: 000000AAAAAA000000 (18 characters)
Pattern: ^[0-9]{6}[A-Z]{6}[0-9]{6}$

Structure:
┌─────────────────────────────────────────────────────────────┐
│ Position │ Description                                       │
├─────────────────────────────────────────────────────────────┤
│ 1-6      │ Date (DDMMYY)                                    │
│ 7-12     │ ICAI membership number (6 characters)            │
│ 13-18    │ Document serial number (6 digits)                │
└─────────────────────────────────────────────────────────────┘

Example: 150223A12345000001
Validation:
1. Verify with ICAI UDIN portal
2. Check that date is valid
3. Verify CA membership number exists
```

---

## 3️⃣ DATA NORMALIZATION RULES

### Financial Values

```
┌─────────────────────────────────────────────────────────────┐
│                    MONETARY VALUE STORAGE                    │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  STORAGE FORMAT: Integer (smallest currency unit)           │
│  For INR: Store in PAISE (1 INR = 100 PAISE)                │
│                                                              │
│  Example:                                                    │
│  ₹5,00,00,000 (5 Crore) → stored as: 5000000000            │
│  ₹12,345.67 → stored as: 1234567                           │
│                                                              │
│  JSON Representation:                                        │
│  {                                                           │
│    "amount": 5000000000,                                     │
│    "amountFormatted": "₹5,00,00,000",                       │
│    "currency": "INR"                                         │
│  }                                                           │
│                                                              │
│  WHY INTEGER?                                                │
│  - Avoids floating-point precision issues                   │
│  - Blockchain-friendly (Solidity uses uint256)              │
│  - Precise calculations without rounding errors             │
│  - Easy to convert for display                              │
│                                                              │
│  CONVERSION RULES:                                           │
│  - Input: Accept string/decimal from user                   │
│  - Process: Convert to integer (multiply by 100)            │
│  - Store: Integer in database                               │
│  - Display: Format with Indian number system (Lakh, Crore)  │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

### Date/Time Storage

```
┌─────────────────────────────────────────────────────────────┐
│                    DATE/TIME STORAGE                         │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  STORAGE FORMAT: ISO 8601 UTC                               │
│                                                              │
│  Timestamps: "2024-02-15T10:30:00.000Z"                     │
│  Dates only: "2024-02-15"                                   │
│  Financial Year: "2023-24"                                  │
│                                                              │
│  RULES:                                                      │
│  1. All timestamps stored in UTC                           │
│  2. Display in IST (UTC+5:30) for Indian users             │
│  3. Dates without time stored as date-only                 │
│  4. Financial year stored as "YYYY-YY" format              │
│                                                              │
│  EXAMPLES:                                                   │
│  Registration: "2024-02-15T05:00:00.000Z" (stored UTC)     │
│  Display: "15-Feb-2024 10:30 AM IST" (shown to user)       │
│                                                              │
│  FINANCIAL YEAR CALCULATION:                                 │
│  - Indian FY: April 1 to March 31                          │
│  - FY 2023-24 = April 1, 2023 to March 31, 2024            │
│  - If date is Jan-March: FY = (year-1)-(year-1+1)          │
│  - If date is April-Dec: FY = (year)-(year+1)              │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

### Project History Structure

```
┌─────────────────────────────────────────────────────────────┐
│                 PROJECT HISTORY NORMALIZATION                │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  REQUIRED FIELDS:                                            │
│  - projectId (UUID)                                         │
│  - projectName (string, max 500 chars)                      │
│  - clientName (string, max 200 chars)                       │
│  - projectValue (monetaryValue object)                      │
│  - startDate (date)                                         │
│  - completionDate (date)                                    │
│  - completionStatus (enum)                                  │
│                                                              │
│  NORMALIZATION RULES:                                        │
│  1. Project value in smallest currency unit                 │
│  2. Dates in ISO 8601 format                                │
│  3. Client names standardized (no abbreviations)            │
│  4. Completion percentage: integer 0-100                    │
│  5. Delay calculated automatically:                         │
│     delayDays = actualCompletionDate - originalCompletionDate│
│                                                              │
│  DERIVED FIELDS (for AI scoring):                           │
│  - projectDuration (days)                                   │
│  - delayPercentage                                          │
│  - valueCategory (small/medium/large based on value)        │
│  - clientTypeWeight (government > PSU > private)            │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

### Turnover Normalization

```
┌─────────────────────────────────────────────────────────────┐
│                   TURNOVER NORMALIZATION                     │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  STORAGE:                                                    │
│  {                                                           │
│    "financialYear": "2023-24",                              │
│    "amount": 5000000000,        // 5 Crore in paise         │
│    "amountFormatted": "₹5,00,00,000",                       │
│    "currency": "INR",                                       │
│    "source": "AUDITED"          // or CERTIFIED_BY_CA       │
│  }                                                           │
│                                                              │
│  VALIDATION RULES:                                           │
│  1. Minimum 3 years of turnover history required            │
│  2. Maximum 5 years stored                                   │
│  3. Financial years must be consecutive                     │
│  4. Source must be declared (audited > CA certified)        │
│                                                              │
│  DERIVED METRICS (for AI):                                   │
│  - averageTurnover (3-year average)                         │
│  - turnoverGrowthRate (YoY growth %)                        │
│  - turnoverStability (standard deviation)                   │
│  - decliningTrend (boolean, if 2+ years decline)            │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

---

## 4️⃣ DOCUMENT REFERENCE STRUCTURE

### Complete Document Reference Model

```json
{
  "documentReferences": {
    "documents": [
      {
        "documentId": "550e8400-e29b-41d4-a716-446655440001",
        "documentType": "PAN_CARD",
        "documentName": "PAN Card - Company",
        "ipfsCID": "QmXyz1234567890abcdef1234567890abcdef12345678",
        "uploadTimestamp": "2024-02-15T10:30:00.000Z",
        "fileSize": 245678,
        "fileHash": "sha256:a1b2c3d4e5f6...",
        "mimeType": "application/pdf",
        "verified": true,
        "verificationTimestamp": "2024-02-15T11:00:00.000Z",
        "verifiedBy": "SYSTEM_API",
        "extractedFields": {
          "panNumber": "AAPFU0939K",
          "nameOnCard": "ABC CONSTRUCTIONS PRIVATE LIMITED",
          "entityType": "C"
        },
        "extractionConfidence": 0.98,
        "rejectionReason": null
      },
      {
        "documentId": "550e8400-e29b-41d4-a716-446655440002",
        "documentType": "GST_CERTIFICATE",
        "documentName": "GST Registration Certificate",
        "ipfsCID": "QmAbc9876543210fedcba9876543210fedcba98765432",
        "uploadTimestamp": "2024-02-15T10:31:00.000Z",
        "fileSize": 356789,
        "fileHash": "sha256:b2c3d4e5f6g7...",
        "mimeType": "application/pdf",
        "verified": true,
        "verificationTimestamp": "2024-02-15T11:05:00.000Z",
        "verifiedBy": "GST_PORTAL_API",
        "extractedFields": {
          "gstin": "27AAPFU0939K1ZM",
          "legalName": "ABC CONSTRUCTIONS PRIVATE LIMITED",
          "tradeName": "ABC BUILDERS",
          "registrationDate": "2017-07-01",
          "taxpayerType": "Regular",
          "businessType": "Private Limited Company",
          "state": "Maharashtra",
          "status": "Active"
        },
        "extractionConfidence": 0.95,
        "rejectionReason": null
      },
      {
        "documentId": "550e8400-e29b-41d4-a716-446655440003",
        "documentType": "CIN_CERTIFICATE",
        "documentName": "Certificate of Incorporation",
        "ipfsCID": "QmDef5678901234bcdefa5678901234bcdefa56789012",
        "uploadTimestamp": "2024-02-15T10:32:00.000Z",
        "fileSize": 289012,
        "fileHash": "sha256:c3d4e5f6g7h8...",
        "mimeType": "application/pdf",
        "verified": true,
        "verificationTimestamp": "2024-02-15T11:10:00.000Z",
        "verifiedBy": "MCA_API",
        "extractedFields": {
          "cin": "U45200MH2015PTC123456",
          "companyName": "ABC CONSTRUCTIONS PRIVATE LIMITED",
          "registrationDate": "2015-03-15",
          "companyCategory": "Company Limited by Shares",
          "companySubCategory": "Non-govt company",
          "authorizedCapital": "10000000",
          "paidUpCapital": "5000000"
        },
        "extractionConfidence": 0.92,
        "rejectionReason": null
      },
      {
        "documentId": "550e8400-e29b-41d4-a716-446655440004",
        "documentType": "CA_TURNOVER_CERTIFICATE",
        "documentName": "CA Certified Turnover Certificate",
        "ipfsCID": "QmGhi0123456789cdefb0123456789cdefb01234567890",
        "uploadTimestamp": "2024-02-15T10:33:00.000Z",
        "fileSize": 412345,
        "fileHash": "sha256:d4e5f6g7h8i9...",
        "mimeType": "application/pdf",
        "verified": true,
        "verificationTimestamp": "2024-02-15T11:15:00.000Z",
        "verifiedBy": "ICAI_UDIN_API",
        "extractedFields": {
          "udin": "150223A12345000001",
          "caName": "CA Rajesh Kumar",
          "caMembershipNumber": "123450",
          "caFirmName": "Kumar & Associates",
          "certificateDate": "2024-01-15",
          "turnoverFY2023": "5000000000",
          "turnoverFY2022": "4500000000",
          "turnoverFY2021": "4000000000"
        },
        "extractionConfidence": 0.88,
        "rejectionReason": null
      },
      {
        "documentId": "550e8400-e29b-41d4-a716-446655440005",
        "documentType": "BANK_SOLVENCY_CERTIFICATE",
        "documentName": "Bank Solvency Certificate",
        "ipfsCID": "QmJkl2345678901defgc1234567890defgc12345678901",
        "uploadTimestamp": "2024-02-15T10:34:00.000Z",
        "fileSize": 198234,
        "fileHash": "sha256:e5f6g7h8i9j0...",
        "mimeType": "application/pdf",
        "verified": true,
        "verificationTimestamp": "2024-02-15T11:20:00.000Z",
        "verifiedBy": "MANUAL_REVIEW",
        "extractedFields": {
          "bankName": "State Bank of India",
          "branchName": "Mumbai Main Branch",
          "solvencyAmount": "10000000000",
          "issueDate": "2024-01-01",
          "validUntil": "2024-12-31",
          "certificateNumber": "SOL/2024/12345"
        },
        "extractionConfidence": 0.85,
        "rejectionReason": null
      },
      {
        "documentId": "550e8400-e29b-41d4-a716-446655440006",
        "documentType": "PAST_PROJECTS_DOCUMENT",
        "documentName": "List of Past Projects",
        "ipfsCID": "QmMno3456789012efghd2345678901efghd23456789012",
        "uploadTimestamp": "2024-02-15T10:35:00.000Z",
        "fileSize": 5678901,
        "fileHash": "sha256:f6g7h8i9j0k1...",
        "mimeType": "application/pdf",
        "verified": false,
        "verificationTimestamp": null,
        "verifiedBy": null,
        "extractedFields": {
          "totalProjects": 15,
          "totalValue": "250000000000",
          "governmentProjects": 8,
          "privateProjects": 7,
          "completedProjects": 12,
          "ongoingProjects": 3
        },
        "extractionConfidence": 0.75,
        "rejectionReason": null
      },
      {
        "documentId": "550e8400-e29b-41d4-a716-446655440007",
        "documentType": "LITIGATION_DISCLOSURE",
        "documentName": "Litigation Disclosure Statement",
        "ipfsCID": "QmPqr4567890123fghie3456789012fghie34567890123",
        "uploadTimestamp": "2024-02-15T10:36:00.000Z",
        "fileSize": 123456,
        "fileHash": "sha256:g7h8i9j0k1l2...",
        "mimeType": "application/pdf",
        "verified": true,
        "verificationTimestamp": "2024-02-15T11:25:00.000Z",
        "verifiedBy": "ECOURTS_API",
        "extractedFields": {
          "hasPendingLitigation": "true",
          "totalCases": "2",
          "civilCases": "2",
          "criminalCases": "0",
          "totalExposure": "50000000"
        },
        "extractionConfidence": 0.90,
        "rejectionReason": null
      },
      {
        "documentId": "550e8400-e29b-41d4-a716-446655440008",
        "documentType": "ESIC_CERTIFICATE",
        "documentName": "ESIC Registration Certificate",
        "ipfsCID": "QmRst5678901234ghijf4567890123ghijf45678901234",
        "uploadTimestamp": "2024-02-15T10:37:00.000Z",
        "fileSize": 156789,
        "fileHash": "sha256:h8i9j0k1l2m3...",
        "mimeType": "application/pdf",
        "verified": true,
        "verificationTimestamp": "2024-02-15T11:30:00.000Z",
        "verifiedBy": "ESIC_PORTAL_API",
        "extractedFields": {
          "esicNumber": "12345678901234567",
          "registrationDate": "2018-06-15",
          "employeeCount": "150"
        },
        "extractionConfidence": 0.93,
        "rejectionReason": null
      },
      {
        "documentId": "550e8400-e29b-41d4-a716-446655440009",
        "documentType": "LABOUR_LICENSE",
        "documentName": "Contract Labour License",
        "ipfsCID": "QmStu6789012345hijkg5678901234hijkg56789012345",
        "uploadTimestamp": "2024-02-15T10:38:00.000Z",
        "fileSize": 178234,
        "fileHash": "sha256:i9j0k1l2m3n4...",
        "mimeType": "application/pdf",
        "verified": true,
        "verificationTimestamp": "2024-02-15T11:35:00.000Z",
        "verifiedBy": "LABOUR_DEPT_API",
        "extractedFields": {
          "licenseNumber": "CL/MH/2024/12345",
          "issuingAuthority": "Labour Commissioner, Maharashtra",
          "validFrom": "2024-01-01",
          "validUntil": "2024-12-31",
          "workforceSize": "200"
        },
        "extractionConfidence": 0.91,
        "rejectionReason": null
      }
    ],
    "rootCID": "QmRootHash1234567890abcdef1234567890abcdef1234",
    "documentHash": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
  }
}
```

### Document Type Requirements

| Document Type | Required | Conditional | Verification Method |
|---------------|----------|-------------|---------------------|
| PAN_CARD | ✅ | - | Income Tax API |
| GST_CERTIFICATE | ✅ | - | GST Portal API |
| CIN_CERTIFICATE | ✅ | If Company | MCA API |
| LLPIN_CERTIFICATE | ✅ | If LLP | MCA API |
| CA_TURNOVER_CERTIFICATE | ✅ | - | ICAI UDIN API |
| BANK_SOLVENCY_CERTIFICATE | ✅ | - | Manual + Bank API |
| PAST_PROJECTS_DOCUMENT | ✅ | - | AI Extraction |
| LITIGATION_DISCLOSURE | ✅ | - | eCourts API |
| ESIC_CERTIFICATE | ✅ | If applicable | ESIC Portal API |
| LABOUR_LICENSE | ❌ | If workforce > 20 | Labour Dept API |
| MSME_CERTIFICATE | ❌ | If MSME registered | Udyam Portal API |

---

## 5️⃣ VERIFICATION STATUS MODEL

### Status Flow Diagram

```
┌─────────────────────────────────────────────────────────────┐
│                  VERIFICATION STATUS FLOW                    │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌─────────┐                                                │
│  │  DRAFT  │ ← Contractor creating application              │
│  └────┬────┘                                                │
│       │ submit()                                            │
│       ▼                                                      │
│  ┌───────────┐                                              │
│  │ SUBMITTED │ ← Application submitted, awaiting review     │
│  └─────┬─────┘                                              │
│        │ beginReview()                                      │
│        ▼                                                     │
│  ┌──────────────┐                                           │
│  │UNDER_REVIEW │ ← Government admin reviewing              │
│  └──────┬───────┘                                           │
│         │                                                    │
│         ├──────────────────────┐                            │
│         │                      │                            │
│         ▼                      ▼                            │
│  ┌─────────────┐        ┌──────────────┐                   │
│  │ AI_SCORED   │        │FLAGGED_FOR_RISK│                  │
│  └──────┬──────┘        └───────┬───────┘                   │
│         │                       │                           │
│         │                       │ resolveRisk()             │
│         │                       │                           │
│         ├───────────────────────┤                           │
│         │                       │                           │
│         ▼                       ▼                           │
│  ┌──────────────┐        ┌──────────────┐                   │
│  │ GOV_APPROVED │        │  REJECTED    │                   │
│  └──────┬───────┘        └──────────────┘                   │
│         │                                                    │
│         │ time passes (e.g., 1 year)                        │
│         ▼                                                    │
│  ┌───────────┐                                              │
│  │  EXPIRED  │ ← Registration expired, needs renewal        │
│  └───────────┘                                              │
│         │                                                    │
│         │ suspend()                                         │
│         ▼                                                    │
│  ┌───────────┐                                              │
│  │ SUSPENDED │ ← Temporarily suspended                      │
│  └───────────┘                                              │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

### Status Definitions

| Status | Code | Description | Allowed Transitions |
|--------|------|-------------|---------------------|
| DRAFT | 0 | Application in progress, not submitted | SUBMITTED |
| SUBMITTED | 1 | Submitted, awaiting review | UNDER_REVIEW, REJECTED |
| UNDER_REVIEW | 2 | Being reviewed by government | AI_SCORED, FLAGGED_FOR_RISK, REJECTED |
| AI_SCORED | 3 | AI has generated competence score | GOV_APPROVED, REJECTED, FLAGGED_FOR_RISK |
| GOV_APPROVED | 4 | Approved by government, active | SUSPENDED, EXPIRED |
| REJECTED | 5 | Application rejected | DRAFT (for re-application) |
| FLAGGED_FOR_RISK | 6 | Risk flags detected, needs resolution | AI_SCORED, REJECTED |
| SUSPENDED | 7 | Temporarily suspended from bidding | GOV_APPROVED, REJECTED |
| EXPIRED | 8 | Registration expired | DRAFT (for renewal) |

### Status History Structure

```json
{
  "verificationStatus": {
    "currentStatus": "GOV_APPROVED",
    "statusHistory": [
      {
        "status": "DRAFT",
        "timestamp": "2024-02-15T09:00:00.000Z",
        "changedBy": "contractor_550e8400",
        "remarks": "Application created"
      },
      {
        "status": "SUBMITTED",
        "timestamp": "2024-02-15T10:30:00.000Z",
        "changedBy": "contractor_550e8400",
        "remarks": "All documents uploaded and submitted"
      },
      {
        "status": "UNDER_REVIEW",
        "timestamp": "2024-02-15T11:00:00.000Z",
        "changedBy": "gov_admin_123",
        "remarks": "Review started"
      },
      {
        "status": "AI_SCORED",
        "timestamp": "2024-02-15T11:30:00.000Z",
        "changedBy": "AI_SYSTEM",
        "remarks": "Competence score generated: 78"
      },
      {
        "status": "GOV_APPROVED",
        "timestamp": "2024-02-15T14:00:00.000Z",
        "changedBy": "gov_admin_456",
        "remarks": "All verifications complete, approved"
      }
    ],
    "submissionTimestamp": "2024-02-15T10:30:00.000Z",
    "reviewStartTimestamp": "2024-02-15T11:00:00.000Z",
    "approvalTimestamp": "2024-02-15T14:00:00.000Z",
    "expiryTimestamp": "2025-02-15T14:00:00.000Z",
    "reviewedBy": "gov_admin_123",
    "approvedBy": "gov_admin_456"
  }
}
```

---

## 6️⃣ RISK FLAG PLACEHOLDERS

### Risk Flag Structure

```json
{
  "riskFlags": {
    "overallRiskLevel": "MEDIUM",
    "flags": [
      {
        "flagId": "550e8400-e29b-41d4-a716-446655440010",
        "flagType": "HIGH_LITIGATION_RISK",
        "severity": "WARNING",
        "description": "Contractor has 3 pending civil cases with total exposure of ₹5 Crore",
        "detectedTimestamp": "2024-02-15T11:25:00.000Z",
        "source": "ECOURTS_API",
        "relatedField": "compliance.litigationDisclosure.litigationCases",
        "evidence": {
          "caseCount": 3,
          "totalExposure": 5000000000,
          "caseTypes": ["CIVIL", "CIVIL", "ARBITRATION"]
        },
        "resolved": false,
        "resolutionTimestamp": null,
        "resolutionRemarks": null
      },
      {
        "flagId": "550e8400-e29b-41d4-a716-446655440011",
        "flagType": "TURNOVER_DECLINE",
        "severity": "INFO",
        "description": "Turnover declined by 15% in FY 2022-23 compared to previous year",
        "detectedTimestamp": "2024-02-15T11:15:00.000Z",
        "source": "AI_DETECTION",
        "relatedField": "financialQualification.turnoverHistory",
        "evidence": {
          "fy2022": 4500000000,
          "fy2023": 3825000000,
          "declinePercentage": 15
        },
        "resolved": true,
        "resolutionTimestamp": "2024-02-15T13:00:00.000Z",
        "resolutionRemarks": "Decline attributed to delayed government payments, not business issues"
      }
    ],
    "lastAssessmentTimestamp": "2024-02-15T11:30:00.000Z",
    "assessmentVersion": "v1.2.0"
  }
}
```

### Risk Flag Types and Severity

| Flag Type | Severity Range | Description |
|-----------|----------------|-------------|
| HIGH_LITIGATION_RISK | WARNING → CRITICAL | Multiple or high-value litigation cases |
| FINANCIAL_INSTABILITY | WARNING → ERROR | Declining turnover, negative net worth |
| GST_MISMATCH | ERROR | GSTIN details don't match portal data |
| INVALID_PAN | CRITICAL | PAN verification failed |
| DOCUMENT_INCONSISTENCY | WARNING → ERROR | Information mismatch between documents |
| TURNOVER_DECLINE | INFO → WARNING | Year-over-year turnover decline |
| BLACKLIST_HISTORY | CRITICAL | Previously blacklisted by any department |
| CRIMINAL_CASE | CRITICAL | Pending criminal cases against directors |
| TAX_DEFAULT | ERROR → CRITICAL | Outstanding tax dues |
| LABOUR_VIOLATION | WARNING → ERROR | ESIC/EPF violations |
| ENVIRONMENTAL_VIOLATION | WARNING → ERROR | Environmental compliance issues |
| CONTRACT_TERMINATION | WARNING → ERROR | Previous contracts terminated early |
| DELAY_HISTORY | INFO → WARNING | History of project delays |
| PERFORMANCE_ISSUE | WARNING → ERROR | Poor performance ratings on past projects |
| IDENTITY_MISMATCH | CRITICAL | PAN/GSTIN/CIN don't match entity details |
| WALLET_MISMATCH | ERROR | Declared wallet doesn't match signature |
| SUSPICIOUS_PATTERN | WARNING | AI-detected suspicious patterns |

### Severity Levels

| Severity | Score Impact | Action Required |
|----------|--------------|-----------------|
| INFO | 0 to -5 | No action, informational only |
| WARNING | -5 to -15 | Review recommended |
| ERROR | -15 to -30 | Must be addressed before approval |
| CRITICAL | -30 to auto-reject | Automatic rejection or manual override required |

---

## FINAL CONTRACTOR DATA MODEL (STRUCTURED)

### Minimal On-Chain Structure (for Smart Contract)

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

/**
 * @title FATTS Contractor Verification Contract
 * @notice Extended contractor registry for FATTS onboarding module
 * @dev This extends the existing TransparentTender contract
 */

struct ContractorVerification {
    bytes32 contractorId;        // UUID hashed
    address walletAddress;       // Linked wallet
    bytes32 documentRootHash;    // Merkle root of all document hashes
    uint256 competenceScore;     // AI-generated score (0-100)
    uint256 registrationTime;    // Timestamp
    uint8 verificationStatus;    // 0=DRAFT, 1=SUBMITTED, 2=UNDER_REVIEW, etc.
    uint8 riskCategory;          // 0=LOW, 1=MEDIUM, 2=HIGH, 3=CRITICAL
    uint8 complianceScore;       // Compliance score (0-100)
    uint256 expiryTime;          // When registration expires
}

struct RiskFlag {
    bytes32 flagId;
    uint8 flagType;              // Enum mapped to flag types
    uint8 severity;              // 0=INFO, 1=WARNING, 2=ERROR, 3=CRITICAL
    bool resolved;
}

mapping(address => ContractorVerification) public contractorVerifications;
mapping(address => RiskFlag[]) public contractorRiskFlags;

// Events
event ContractorRegistered(
    bytes32 indexed contractorId,
    address indexed walletAddress,
    uint256 timestamp
);

event ContractorApproved(
    bytes32 indexed contractorId,
    address indexed walletAddress,
    uint256 competenceScore,
    uint8 riskCategory
);

event RiskFlagRaised(
    bytes32 indexed contractorId,
    bytes32 indexed flagId,
    uint8 flagType,
    uint8 severity
);

event RiskFlagResolved(
    bytes32 indexed contractorId,
    bytes32 indexed flagId,
    string resolution
);
```

### Complete Off-Chain Structure (Database)

The complete JSON schema defined in Section 1 is stored in the off-chain PostgreSQL database with the following table structure:

```
┌─────────────────────────────────────────────────────────────┐
│                    DATABASE TABLE DESIGN                     │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  contractors (main table)                                    │
│  ├── id (UUID, primary key)                                 │
│  ├── contractor_id (UUID, unique, indexed)                  │
│  ├── wallet_address (string, unique, indexed)               │
│  ├── registration_timestamp (timestamp)                     │
│  ├── last_updated_timestamp (timestamp)                     │
│  ├── verification_status (enum)                             │
│  ├── competence_score (integer)                             │
│  ├── risk_level (enum)                                      │
│  └── document_root_hash (string)                            │
│                                                              │
│  contractor_legal_identity (related table)                   │
│  ├── contractor_id (FK)                                     │
│  ├── entity_type (enum)                                     │
│  ├── legal_name (string)                                    │
│  ├── pan (string, encrypted)                                │
│  ├── gstin (string, encrypted)                              │
│  ├── cin (string, encrypted, nullable)                      │
│  ├── llpin (string, encrypted, nullable)                    │
│  └── ... (other identity fields)                            │
│                                                              │
│  contractor_financial (related table)                        │
│  ├── contractor_id (FK)                                     │
│  ├── turnover_history (jsonb)                               │
│  ├── solvency_details (jsonb)                               │
│  └── ... (other financial fields)                           │
│                                                              │
│  contractor_projects (related table)                         │
│  ├── contractor_id (FK)                                     │
│  ├── projects (jsonb array)                                 │
│  └── ... (other project fields)                             │
│                                                              │
│  contractor_compliance (related table)                       │
│  ├── contractor_id (FK)                                     │
│  ├── litigation_disclosure (jsonb)                          │
│  ├── esic_details (jsonb)                                   │
│  ├── labour_license (jsonb)                                 │
│  └── ... (other compliance fields)                          │
│                                                              │
│  contractor_documents (related table)                        │
│  ├── contractor_id (FK)                                     │
│  ├── documents (jsonb array)                                │
│  └── root_cid (string)                                      │
│                                                              │
│  contractor_risk_flags (related table)                       │
│  ├── contractor_id (FK)                                     │
│  ├── flags (jsonb array)                                    │
│  └── last_assessment (timestamp)                            │
│                                                              │
│  contractor_audit_trail (related table)                      │
│  ├── contractor_id (FK)                                     │
│  ├── audit_entries (jsonb array)                            │
│  └── ... (audit metadata)                                   │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

---

## PHASE 1 COMPLETE
## READY FOR NEXT PHASE
